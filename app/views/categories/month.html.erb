<% provide(:title, @title ||= "All Categories") %>

<h1>
  <%= yield(:title) %>
</h1>

<div class="ba-flex ba-flex-wrap ba-flex-nowrap-md">
  <% if @all_categories.expense[:all].length > 0 %>
    <%= render 'multi_category_summary', categories: @all_categories.expense, classes: "ba-flex-item ba-flex-basis-6-md ba-mb-double ba-mb-none-md ba-mr-double-md" %>
  <% end %>

  <% if @all_categories.income[:all].length > 0 %>
    <%= render 'multi_category_summary', categories: @all_categories.income, classes: "ba-flex-item ba-flex-basis-6-md" %>
  <% end %>
</div>


<h5 class="ba-pt-base">
  Largest expenses
</h5>

<ul>
  <% @all_categories.top_expenses.each do |exp| %>
    <li>
       <%= number_to_currency(exp.value) %> for <%= exp.name %> in <%= link_to exp.category.name, "/categories/#{params[:year]}/#{params[:month]}/#{exp.category.id}" %>
    </li>
  <% end %>
</ul>

<h5 class="ba-pt-base">
  Monthly Balance: <%= number_to_currency(@all_categories.final_balance[:balance]) %> (<%= @all_categories.final_balance[:balance_state] %>)
</h5>

<h5 class="ba-pt-base">
  Monthly Profit: <%= number_to_currency(@all_categories.final_balance[:profit]) %> (<%= @all_categories.final_balance[:profit_state] %>)
</h5>


<div class="ba-pt-double">
  <p>
    <%= link_to "All months", all_months_path %>
  </p>
  <p>
    <%= link_to "Add a new category!", new_category_path %>
  </p>
  <p>
    <%= link_to "Edit your categories!", categories_edit_path %>
  </p>
</div>
